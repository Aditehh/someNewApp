generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id           String @id @default(uuid())
  name         String
  email        String @unique
  passwordHash String
  role         Role   @default(CUSTOMER)

  providerProfile ProviderProfile?
  reviews         Review[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ProviderProfile {
  id     String @id @default(uuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id])

  city String
  bio  String?

  createdAt DateTime @default(now())
  reviews   Review[]
}

model Review {
  id         String @id @default(uuid())
  userId     String
  providerId String

  user     User            @relation(fields: [userId], references: [id])
  provider ProviderProfile @relation(fields: [providerId], references: [id])

  rating  Int
  comment String?

  createdAt DateTime @default(now())
}

enum Role {
  CUSTOMER
  PROVIDER
}
